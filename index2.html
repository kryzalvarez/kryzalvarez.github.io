<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiservicios</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-color: rgb(255, 255, 255);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            color: black;
            font-family: 'Public Sans', sans-serif;
        }

        #main-text {
            font-size: 24px;
            font-weight: bold;
            margin-top: 50px;
        }

        .image-buttons-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
        }

        .image-button {
            margin: 10px;
            overflow: hidden;
            width: 140px;
            height: 140px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            position: relative;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .image-button img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }

        .image-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .image-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        .image-button:hover::before {
            opacity: 0.7;
        }

        #inicio-button {
            margin-top: auto;
            margin-bottom: 20px;
            overflow: hidden;
            width: 120px;
            height: 50px;
            background-color: #3498db;
            color: #fff;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            text-decoration: none;
            transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.3s ease;
        }

        #inicio-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            background-color: #297dbb;
        }

        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
            background-color: #fff;
            border: 1px solid #3498db;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            text-align: left;
            border-radius: 10px;
        }

        .popup-content {
            display: flex;
            align-items: center;
        }

        .popup-image img {
            max-width: 150px;
            max-height: 150px;
            object-fit: cover;
            border-radius: 5px;
        }

        .popup-text {
            margin-left: 20px;
        }

        .popup-buttons {
            margin-top: 10px;
        }

        .popup-price {
            font-weight: bold;
            color: #3498db;
        }

        .popup-buttons button {
            width: 100px;
            padding: 10px;
            margin: 5px;
            background-color: #3498db;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .popup-buttons button:hover {
            background-color: #297dbb;
        }

        .selected-images-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
        }

        .selected-image {
            margin: 10px;
            overflow: hidden;
            position: relative;
        }

        .selected-image img {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 5px;
        }

        .quantity {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: #3498db;
            color: #fff;
            border-radius: 50%;
            padding: 5px;
            font-size: 14px;
        }

        #total-price {
            margin-top: 20px;
            font-weight: bold;
            font-size: 18px;
        }

        #payment-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: center;
        }

        #payment-buttons button {
            width: 120px;
            padding: 10px;
            margin: 5px;
            background-color: #3498db;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #payment-buttons button:hover {
            background-color: #297dbb;
        }
    </style>
</head>

<body>
    <div id="main-text">COMPRA TUS PRODUCTOS AQUÍ</div>

    <div class="image-buttons-container">
        <!-- Botones de Productos -->
        <button class="image-button" onclick="toggleProductSelection('Producto 1', 20)">
            <img src="images/Producto-1.jpeg" alt="Producto 1">
        </button>
        <button class="image-button" onclick="toggleProductSelection('Producto 2', 15)">
            <img src="images/Producto-2.jpeg" alt="Producto 2">
        </button>
        <button class="image-button" onclick="toggleProductSelection('Producto 3', 25)">
            <img src="images/Producto-3.jpeg" alt="Producto 3">
        </button>
        <button class="image-button" onclick="toggleProductSelection('Producto 4', 18)">
            <img src="images/Producto-4.jpeg" alt="Producto 4">
        </button>
        <button class="image-button" onclick="toggleProductSelection('Producto 5', 12)">
            <img src="images/Producto-5.jpeg" alt="Producto 5">
        </button>
        <button class="image-button" onclick="toggleProductSelection('Producto 6', 22)">
            <img src="images/Producto-6.jpeg" alt="Producto 6">
        </button>
    </div>

    <!-- Botón de Inicio -->
    <a href="#" id="inicio-button">Inicio</a>

    <div id="popup" class="popup">
        <div class="popup-content" id="popup-content">
            <img id="popup-image" src="" alt="Popup Image" class="popup-image">
            <div class="popup-text">
                <p>Seguro que quieres comprar el producto?</p>
                <p class="popup-price" id="popup-price"></p>
                <div class="popup-buttons">
                    <button onclick="toggleProductSelection('Producto 1', 20)">Aceptar</button>
                    <button onclick="closePopup()">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Contenedor de Imágenes Seleccionadas -->
    <div id="selected-images-container" class="selected-images-container"></div>

    <!-- Total y Botones de Pago -->
    <div id="total-price"></div>
    <div id="payment-buttons">
        <button onclick="pay()">Pagar</button>
        <button onclick="cancelPayment()">Cancelar</button>
    </div>

    <script>
        let selectedProducts = [];

        function toggleProductSelection(productText, productPrice) {
            const existingProductIndex = selectedProducts.findIndex(product => product.text === productText);

            if (existingProductIndex !== -1) {
                // Incrementa la cantidad si ya está seleccionado
                selectedProducts[existingProductIndex].quantity++;
            } else {
                // Agrega el producto a la selección
                selectedProducts.push({ text: productText, price: productPrice, quantity: 1 });
            }

            updateSelectedImagesContainer();
            updateTotalPrice();
        }

        function updateSelectedImagesContainer() {
            const container = document.getElementById('selected-images-container');
            container.innerHTML = '';

            selectedProducts.forEach(product => {
                const imgContainer = document.createElement('div');
                imgContainer.className = 'selected-image';
                imgContainer.onclick = () => decrementProductSelection(product.text);

                const img = document.createElement('img');
                img.src = getProductImage(product.text);
                img.alt = product.text;

                const quantity = document.createElement('div');
                quantity.className = 'quantity';
                quantity.innerText = product.quantity;

                imgContainer.appendChild(img);
                imgContainer.appendChild(quantity);
                container.appendChild(imgContainer);
            });
        }

        function updateTotalPrice() {
            const totalPriceElement = document.getElementById('total-price');
            const totalPrice = selectedProducts.reduce((sum, product) => sum + product.price * product.quantity, 0);
            totalPriceElement.innerText = `Total: $${totalPrice}`;
        }

        function getProductImage(productText) {
            return 'images/' + productText.toLowerCase().replace(/\s+/g, '-') + '.jpeg';
        }

        function decrementProductSelection(productText) {
            // Decrementa la cantidad del producto en la selección
            const selectedProductIndex = selectedProducts.findIndex(product => product.text === productText);

            if (selectedProductIndex !== -1) {
                const selectedProduct = selectedProducts[selectedProductIndex];

                // Decrementa la cantidad, o elimina si la cantidad es 1
                if (selectedProduct.quantity > 1) {
                    selectedProduct.quantity--;
                } else {
                    selectedProducts.splice(selectedProductIndex, 1);
                }

                // Actualiza la interfaz
                updateSelectedImagesContainer();
                updateTotalPrice();
            }
        }

        function pay() {
            // Agrega la lógica de pago aquí
            console.log('Realizando el pago...');
            console.log('Productos seleccionados:', selectedProducts);
        }

        function cancelPayment() {
            // Cancela el pago y limpia la selección
            selectedProducts = [];
            updateSelectedImagesContainer();
            updateTotalPrice();
        }

        function showPopup(imageSrc, productText, productPrice) {
            document.getElementById('popup-image').src = imageSrc;
            document.getElementById('popup-price').innerText = 'Precio: ' + productPrice;
            document.getElementById('popup').style.display = 'block';
        }

        function closePopup() {
            document.getElementById('popup').style.display = 'none';
        }
    </script>
</body>

</html>

